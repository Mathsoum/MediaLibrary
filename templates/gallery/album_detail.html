{% extends "global/main.html" %}
{% block body %}

<h2>Album "{{ album.title }}"</h2>
<a href="{% url 'gallery.views.album_list' %}">Retour &agrave; la liste des albums</a>

<p>{{ album.description }}</p>

<p><a href="{% url 'gallery.views.image_add' %}?album_slug={{ album.slug }}">Ajouter une image</a></p>

{% if not album.image_set.all %}
    <p>Aucune photo n'a encore &eacute;t&eacute; ajout&eacute;e &agrave; cet album.</p>
{% else %}
    <p>Liste des photos dans cet album :</p>
    <ul>
    {% for image in album.image_set.all %}
        <li>
            <a href='{{ MEDIA_URL }}{{ image.original }}'>{{ image.title }}</a>
            <a href="{% url 'gallery.views.image_del' album.slug image.id %}">Delete</a>
        </li>
    {% endfor %}
    </ul>
    
    <div class='galleria'></div>
    
    <script>
        {% load staticfiles %}
        Galleria.loadTheme("{% static 'galleria/themes/classic/galleria.classic.min.js' %}");
        var data = {{ album.get_images_as_json|safe }}
        Galleria.configure({
            transition: 'fade',
            imageCrop: false,
            lightbox: true
        });
        Galleria.run('.galleria', { dataSource: data });
    </script>
{% endif %}

{% endblock %}